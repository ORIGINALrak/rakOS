<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>rakOS</title>
  <link rel="stylesheet" href="rakOS.css">
</head>

<body id="fobody" onload="timeDisplay()">
  <div class="turnOn" id="turnOn">
    <button class="turnOnbtn" id="turnOnbtn" onclick="turnOn()">
      <img style="margin: 0;width: 100%;height: 100%;" src="src/tornonsvg.svg" alt=""></button>
  </div>
  <section id="body">
      <div class="table" style="position: relative;" id="table">
        <div class="aktiv" id="activate-text" style="z-index: 100000000; opacity: 0.5">
          <p>ACTIVATE RAKOS</p>
          <p>GO TO THE SETTING TO ACTIVATE RAKOS</p>
        </div>
        <div class="draggable icon" id="trashcan" style="left: 50px; top:50px;">
          <img src="src/trashcan.svg" width="100%" height="100%" alt="">
        </div>
        <div id="folder1" class="draggable icon" style="left: 200px; top:50px;">
          <img src="src/folder.svg" width="100%" height="100%" alt="" ondblclick="openfolder('folder')">
          <input onchange="iconRename()" id="folder1Value" class="iconName" type="text" value="folder1">
        </div>
        <div id="folder2" class="draggable icon" style="left: 350px; top:50px;">
          <img src="src/folder.svg" width="100%" height="100%" alt=""  ondblclick="openfolder('folder')">
          <input onchange="iconRename()" id="folder2Value" class="iconName" type="text" value="folder2">
        </div>
        <div id="folder3" class="draggable icon" style="left: 500px; top:50px;">
          <img src="src/folder.svg" width="100%" height="100%" alt="" ondblclick="openfolder('folder')">
          <input onchange="iconRename()" id="folder3Value" class="iconName" type="text" value="folder3">
        </div>
        <div id="lobster" class="draggable icon" style="left: 650px;top: 50px;">
          <img id="lobster" src="src/lobster.png" width="100%" height="100%" alt="" ondblclick="openfolder('picture')">
          <input onchange="iconRename()" id="lobsterValue" class="iconName" type="text" value="lobster">
        </div>
        <div id="notepad" class="draggable icon" style="left: 800px; top:50px;">
          <img id="notepad" src="src/notepad.png" width="100%" height="100%" alt="" ondblclick="openfolder('notepad')">
          <input onchange="iconRename()" id="notepadValue" class="iconName" type="text" value="notepad">
        </div>
        <div id="contextMenu" class="context-menu-holder">
          <a class="context-menu" onclick="newItem('folder')" href="#">New folder</a>
          <a class="context-menu" onclick="newItem('image')" href="#">New image</a>
          <a class="context-menu" onclick="newItem('notepad')" href="#">New notepad</a>
          <a class="context-menu" onclick="setNewBG()" href="#">New background</a>
          <a class="context-menu" onclick="forceReload()" href="#">Refresh</a>
          <a class="context-menu" id="activate" onclick="activate()" href="#" style="border: 1px solid red">Activate rakOS</a>
        </div>

        <div class="activateDiv" id="activateDiv" style="z-index: 100000000;">
          <img src="src/activateLike.png" alt="ha ezt latod unlucky" class="keppp">
        </div>

        <div class="menuClose" id="menuClose">
          <div style="display: flex;align-items: center;flex-direction: column;">
            <button class="turnOff" onclick="turnOff()"><img src="src/tornonsvg.svg" alt=""></button>
            <p id="turnOfflabel" style="display: none;">Kikapcsolás</p>
          </div>
          <div style="display: flex;align-items: center;flex-direction: column;">
            <button class="turnOff" onclick="logout()"><img src="src/tornonsvg.svg" alt=""></button>
            <p id="logoutlabel" style="display: none;">Kijelentkezés</p>
          </div>
          
        </div>
       
      </div>
      <div class="tray" id="tray">
        <button onclick="menuShow()">
          <table>
            <tr>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td></td>
              <td></td>
            </tr>
          </table>
        </button>
        <div class="trayIcons">
            
        </div>
        
        <div class="timestamps">
          <span id="time"></span>
          <span id="date"></span>
        </div>
      </div>
  </section>
  <script src="app.js"></script>
  <script src="collision.js"></script>
  <script src="https://kit.fontawesome.com/cbddfbce65.js" crossorigin="anonymous"></script>
  <script type="module">
    document.onclick = hideMenu;
    document.oncontextmenu = rightClick;
  
    function hideMenu() {
      document.getElementById("contextMenu").style.display = "none";
    }
  
    function rightClick(e) {
      e.preventDefault();
      
      let menu = document.getElementById("contextMenu");

      menu.style.display = "flex";
      menu.style.visibility = "hidden";
      
      let menuWidth = menu.offsetWidth;
      let menuHeight = menu.offsetHeight;
      let windowWidth = window.innerWidth;
      let windowHeight = window.innerHeight;
  
      let posX = e.pageX;
      let posY = e.pageY;
  
      // Ensure the menu does not go outside the right boundary
      if (posX + menuWidth > windowWidth) {
        posX = windowWidth - menuWidth;
      }
  
      // Ensure the menu does not go outside the bottom boundary
      if (posY + menuHeight > windowHeight - 70) {
        posY = posY - menuHeight;
      }
  
      menu.style.left = `${posX}px`;
      menu.style.top = `${posY}px`;
      menu.style.visibility = "visible";
    }
    
    deselectRename()
  </script>
  
</body>

</html>